# 软件工程设计原则速查表（中英对照 · Markdown 版，含来源）

| 原则 Principle                                | 要义 Essence                                      | ✅ 示例 Example                                     | ❌ 反例 Anti-example                      | 来源 Sources                                                   |
| :-------------------------------------------- | :------------------------------------------------ | :------------------------------------------------- | :--------------------------------------- | :------------------------------------------------------------- |
| DRY（Don't Repeat Yourself）                  | 同一事实只在一个地方表达 / Single Source of Truth | 将邮箱校验封装为一个函数/库供复用                  | 在 4 个模块里复制同一段正则与逻辑        | Hunt & Thomas, *The Pragmatic Programmer* (1999)               |
| KISS（Keep It Simple, Stupid）                | 能用简单方案就别堆复杂度                          | 用直观循环/映射完成需求                            | 为小需求上元编程/复杂反射                | US Navy / Kelly Johnson（1960s）                               |
| YAGNI（You Aren't Gonna Need It）             | 未被真实需求驱动的功能先不做                      | 等到出现第二/第三个实现再抽象插件化                | 项目第 1 天就造通用插件框架              | Extreme Programming（Kent Beck, Ron Jeffries, 1990s）          |
| SRP（单一职责）                               | 一个模块/类只有一个导致其变化的原因               | InvoicePrinter 只负责打印，Repository 只负责持久化 | 同一类里做解析+校验+DB+渲染              | Robert C. Martin（1996–2003）                                  |
| OCP（开闭）                                   | 对扩展开放，对修改封闭                            | 新增支付方式通过新增类实现接口即可                 | 每次加方式都改巨大 switch                | Bertrand Meyer, *Object-Oriented Software Construction* (1988) |
| LSP（里氏替换）                               | 子类型可替换基类型且不破坏正确性                  | 确保子类不收紧前置条件/不放宽后置条件              | 让 Square 继承 Rectangle 破坏宽高独立    | Barbara Liskov (1987); Liskov & Wing (1994)                    |
| ISP（接口隔离）                               | 用多个小接口替代臃肿大接口                        | IPrinter/IScanner 拆分针对不同客户                 | FatInterface 让实现类到处抛 Unsupported  | Robert C. Martin（1996）                                       |
| DIP（依赖倒置）                               | 高层与底层都依赖抽象，细节依赖抽象                | 依赖 Storage 接口，注入 S3/FS 实现                 | 高层直接 new MySQLClient 并写死连接      | Robert C. Martin（1996）                                       |
| SoC（关注点分离）                             | 将 UI/业务/数据等不同关注点分离                   | Controller/Service/Repo 分层各司其职               | 页面里同时写 SQL + 业务 + HTML           | E. W. Dijkstra (1974); 亦承接 Parnas（1972）                   |
| 组合优于继承 (Composition over Inheritance)   | 优先用对象组合（has-a）而非类继承（is-a）         | 用 Logger 成员处理日志，而非继承 LoggingClass      | 为复用几个方法而继承一个巨大基类         | Gang of Four, *Design Patterns* (1994)                         |
| LoD（迪米特法则）                             | 只与直接朋友交互，避免长链调用                    | `order.process()` 由 order 内部处理                | `a.getB().getC().doSomething()` 链式穿透 | Lieberherr, Holland, Riel（1988–1989）                         |
| SLAP（单一抽象层次）                          | 函数内部语句保持同一抽象层级                      | 高层函数只调用意图清晰的子过程                     | 在高层逻辑中直接拼接 SQL/字节数组        | Robert C. Martin, *Clean Code* (2008)                          |
| POLA（最小惊讶）                              | 行为符合用户/读者直觉                             | Ctrl+C 取消/撤销而非删除                           | 关闭窗口自动清空数据且不提示             | HCI / Unix 文化（1970s–1980s）                                 |
| 信息隐藏（Information Hiding）                | 将易变决策封装在稳定接口后                        | 隐藏文件格式细节在仓储模块内                       | 接口暴露内部字段/版本细节                | David Parnas (1972)                                            |
| 高内聚 / 低耦合                               | 模块内功能紧密相关，模块间依赖少且简单            | 稳定的小接口；依赖自顶向下清晰                     | 跨模块到处互相调用、形成依赖网           | Yourdon & Constantine, *Structured Design* (1979)              |
| 设计契约（DbC）                               | 前置/后置/不变式写进接口约束                      | 参数断言 + 返回保证 + 状态不变式                   | 隐含假设无处记录，靠注释/记忆            | Bertrand Meyer / Eiffel（1986–1988）                           |
| IoC（好莱坞法则）                             | 框架控制流程，你提供扩展点                        | 注册回调/组件，框架按生命周期调用                  | 应用层层调用框架内部私有方法             | “Hollywood Principle” / Inversion of Control（1990s）          |
| CQS（命令-查询分离）                          | 查询不改状态，命令不返回数据                      | `balance()` 只读；`deposit()` 无返回副作用明确     | `getAndIncrement()` 既查又改             | Bertrand Meyer                                                 |
| Tell, Don’t Ask                               | 告诉对象“做什么”，别拿内部数据自己做              | `cart.addItem(item)`                               | 外部拿 `cart.items` 自己增删             | Kent Beck / Martin Fowler（2000s）                             |
| 组件内聚 (CCP/CRP)                            | 同类变化应在同一组件内；要用就一起用              | 因税务规则变化的类放在一起 (CCP)                   | 一个组件里混杂 UI 和底层网络工具         | Robert C. Martin, *Agile Software Development* (2002)          |
| 组件依赖 (ADP/SDP/SAP)                        | 无环(ADP)；依赖更稳定(SDP)；稳定=抽象(SAP)        | 领域接口由稳定层定义，细节层实现；依赖无环         | UI↔Service 互相依赖；稳定层依赖易变层    | Robert C. Martin, *Agile Software Development* (2002)          |
| Boy Scout Rule（童子军法则）                  | 每次提交让代码更干净一点                          | 顺手改好误导变量名/补测试                          | 长期遗留 TODO 不处理                     | Robert C. Martin, *Clean Code* (2008)                          |
| Rule of Three（三次法则）                     | 第三次重复就抽象/重构                             | 第三次看到相似代码提取公共模块                     | 第一次就过早抽象导致复杂                 | Martin Fowler & Don Roberts, *Refactoring* (1999)              |
| Zero–One–Infinity（零一无穷）                 | 不要拍脑袋支持“两个”                              | 支持任意数量的监听器/插件                          | 硬编码只支持 2 个目标                    | MIT/编程传承（1970s，编程民间准则）                            |
| Fail Fast（快速失败）                         | 尽早暴露错误，缩短定位路径                        | 参数校验/不吞异常/明确错误边界                     | catch 后静默继续导致后续连锁错           | 系统工程实践；Java fail-fast 迭代器（2000s）                   |
| Orthogonality（正交性）                       | 能力维度独立可组合                                | 日志、存储、协议解耦可自由组合                     | 特性彼此耦合牵一发而动全身               | Hunt & Thomas, *The Pragmatic Programmer* (1999)               |
| Leaky Abstractions（泄漏抽象）                | 非平凡抽象都会泄漏细节，要有防线                  | RPC 仍需考虑超时/重试/幂等                         | 把网络当本地调用忽略部分失败             | Joel Spolsky, “The Law of Leaky Abstractions” (2002)           |
| Convention over Configuration（约定优于配置） | 良好默认减少样板配置                              | 按约定放置 src/ 即可生效                           | 要求冗长 XML/注解才能起步                | Ruby on Rails 社区 / D. H. Hansson（2004+）                    |
| POLP（最小特权）                              | 仅赋予完成任务所需的最小权限                      | 只读 S3 凭证给只读服务                             | 默认发 root key 到处可写                 | Saltzer & Schroeder (1975)                                     |
| Postel Law（健壮性原则）                      | 发送要保守，接收要宽容（现代注意安全）            | 解析 JSON 忽略未知字段但校验必需项                 | 过度宽容导致歧义/注入风险                | J. Postel, RFC 761 / RFC 1122                                  |
| SemVer（语义化版本）                          | 用 MAJOR.MINOR.PATCH 传达兼容性                   | 破坏性变更升 MAJOR；小修升 PATCH                   | 补丁版悄悄改行为破坏兼容                 | Tom Preston-Werner, semver.org（2013）                         |
| Idempotency（幂等性）                         | 相同请求重复执行结果一致                          | PUT `/orders/123` 可重试不重复扣费                 | POST `/charge` 每次重试多扣一次          | 数学概念；HTTP RFC 7231（2014）                                |
| GRASP（责任分配）                             | 信息专家/创建者/控制器/多态/间接 等               | 控制器接收用例、信息专家持数据行为                 | 让随机类承担流程与数据杂糅职责           | Craig Larman, *Applying UML and Patterns* (1997–2004)          |